{
  "name": "@logseq/db-sync",
  "version": "1.0.0",
  "private": true,
  "scripts": {
    "dev": "cd ./worker && npx wrangler dev",
    "watch": "clojure -M:cljs watch db-sync",
    "release": "clojure -M:cljs release db-sync",
    "build:node-adapter": "clojure -M:cljs release db-sync-node",
    "dev:node-adapter": "clojure -M:cljs watch db-sync-node",
    "start:node-adapter": "node worker/dist/node-adapter.js",
    "migrate:local": "cd ./worker && wrangler d1 migrations apply DB --local",
    "migrate:staging": "cd ./worker && wrangler d1 migrations apply logseq-sync-graph-meta-staging --env staging",
    "migrate:prod": "cd ./worker && wrangler d1 migrations apply logseq-sync-graphs-prod --env prod",
    "test:node-adapter": "clojure -M:cljs compile db-sync-test && node worker/dist/worker-test.js",
    "test": "clojure -M:cljs compile db-sync-test && node worker/dist/worker-test.js",
    "clean": "rm -rf ./worker/dist/",
    "sentry:sourcemaps": "sentry-cli sourcemaps upload --release $SENTRY_RELEASE --rewrite --strip-prefix worker/dist/worker --url-prefix \"~/\" worker/dist/worker",
    "deploy-prod": "export SENTRY_RELEASE=$(git rev-parse HEAD) && yarn clean && yarn release && yarn sentry:sourcemaps && cd ./worker && wrangler deploy --env prod",
    "deploy-staging": "export SENTRY_RELEASE=$(git rev-parse HEAD) && yarn clean && yarn release && yarn sentry:sourcemaps && cd ./worker && wrangler deploy --env staging"
  },
  "dependencies": {
    "@sentry/cloudflare": "^10.38.0",
    "@sentry/node": "^10.38.0",
    "better-sqlite3": "^12.6.2",
    "shadow-cljs": "^3.3.4",
    "ws": "^8.18.3"
  },
  "devDependencies": {
    "@sentry/cli": "^3.1.0"
  }
}
